<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../../../img/favicon.ico">
  <title>Validate results - ALLFED Integrated Model</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../../../css/theme.css" />
  <link rel="stylesheet" href="../../../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Validate results";
    var mkdocs_page_input_path = "modules/src/optimizer/validate_results.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../../../.." class="icon icon-home"> ALLFED Integrated Model</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../..">ALLFED Integrated Food System Model</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Modules</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="#">Src</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="#">Food system</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/animal_populations/">Animal populations</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/cellulosic_sugar/">Cellulosic sugar</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/feed_and_biofuels/">Feed and biofuels</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/food/">Food</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/greenhouses/">Greenhouses</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/meat_and_dairy/">Meat and dairy</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/methane_scp/">Methane scp</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/outdoor_crops/">Outdoor crops</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/seafood/">Seafood</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/seaweed/">Seaweed</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/stored_food/">Stored food</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/unit_conversions/">Unit conversions</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Import scripts no food trade</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../import_scripts_no_food_trade/create_crop_macros_csv/">Create crop macros csv</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../import_scripts_no_food_trade/create_nuclear_winter_csv/">Create nuclear winter csv</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Optimizer</a>
    <ul class="current">
                <li class="toctree-l3"><a class="reference internal" href="../extract_results/">Extract results</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../interpret_results/">Interpret results</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../optimizer/">Optimizer</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../parameters/">Parameters</a>
                </li>
                <li class="toctree-l3 current"><a class="reference internal current" href="./">Validate results</a>
    <ul class="current">
    <li class="toctree-l4"><a class="reference internal" href="#validator">Validator</a>
    </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Scenarios</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../scenarios/run_model_no_trade/">Run model no trade</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../scenarios/run_scenario/">Run scenario</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../scenarios/run_scenarios_from_yaml/">Run scenarios from yaml</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../scenarios/scenarios/">Scenarios</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Utilities</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../utilities/constants/">Constants</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../utilities/import_utilities/">Import utilities</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../utilities/make_powerpoint/">Make powerpoint</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../utilities/plotter/">Plotter</a>
                </li>
    </ul>
                </li>
    </ul>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../..">ALLFED Integrated Model</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Modules &raquo;</li>
        
      
        
          <li>Src &raquo;</li>
        
      
        
          <li>Optimizer &raquo;</li>
        
      
    
    <li>Validate results</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="_1"></h1>
<h2 id="validator">Validator</h2>
<p><a href="https://github.com/allfed/allfed-integrated-model/blob/master/src/optimizer/validate_results.py/#L15">source</a></p>
<pre><code class="language-python">Validator()
</code></pre>
<p><strong>Methods:</strong></p>
<h3 id="validate_results">.validate_results</h3>
<p><a href="https://github.com/allfed/allfed-integrated-model/blob/master/src/optimizer/validate_results.py/#L16">source</a></p>
<pre><code class="language-python">.validate_results(
   extracted_results, interpreted_results, time_consts, percent_fed_from_model,
   optimization_type, country_code
)
</code></pre>
<hr />
<p>Validates the results of the model by ensuring that the optimizer returns the same as the sum of nutrients,
that zero kcals have zero fat and protein, that there are no NaN values, and that all values are greater than or
equal to zero.</p>
<p><strong>Args</strong></p>
<ul>
<li><strong>model</strong> (Model) : The model to validate the results of.</li>
<li><strong>extracted_results</strong> (ExtractedResults) : The extracted results from the model.</li>
<li><strong>interpreted_results</strong> (InterpretedResults) : The interpreted results from the model.</li>
</ul>
<p><strong>Returns</strong></p>
<p>None</p>
<h3 id="ensure_all_time_constants_units_are_billion_kcals">.ensure_all_time_constants_units_are_billion_kcals</h3>
<p><a href="https://github.com/allfed/allfed-integrated-model/blob/master/src/optimizer/validate_results.py/#L61">source</a></p>
<pre><code class="language-python">.ensure_all_time_constants_units_are_billion_kcals(
   time_consts
)
</code></pre>
<h3 id="check_constraints_satisfied">.check_constraints_satisfied</h3>
<p><a href="https://github.com/allfed/allfed-integrated-model/blob/master/src/optimizer/validate_results.py/#L74">source</a></p>
<pre><code class="language-python">.check_constraints_satisfied(
   model, maximize_constraints, variables
)
</code></pre>
<hr />
<p>This function checks if all constraints are satisfied by the final values of the variables.
It takes a really long time to run, so it's run infrequently.</p>
<p><strong>Args</strong></p>
<ul>
<li><strong>model</strong> (pulp.LpProblem) : The optimization model</li>
<li><strong>maximize_constraints</strong> (list) : A list of constraints to maximize</li>
<li><strong>variables</strong> (list) : A list of variables to check constraints against</li>
</ul>
<p><strong>Returns</strong></p>
<p>None</p>
<p><strong>Raises</strong></p>
<ul>
<li><strong>AssertionError</strong>  : If a constraint is not satisfied</li>
</ul>
<h3 id="ensure_optimizer_returns_same_as_sum_nutrients">.ensure_optimizer_returns_same_as_sum_nutrients</h3>
<p><a href="https://github.com/allfed/allfed-integrated-model/blob/master/src/optimizer/validate_results.py/#L161">source</a></p>
<pre><code class="language-python">.ensure_optimizer_returns_same_as_sum_nutrients(
   percent_fed_from_model, interpreted_results, INCLUDE_FAT, INCLUDE_PROTEIN,
   country_code
)
</code></pre>
<hr />
<p>ensure there was no major error in the optimizer or in analysis which caused
the sums reported to differ between adding up all the extracted variables and
just look at the reported result of the objective of the optimizer</p>
<h3 id="ensure_zero_kcals_have_zero_fat_and_protein">.ensure_zero_kcals_have_zero_fat_and_protein</h3>
<p><a href="https://github.com/allfed/allfed-integrated-model/blob/master/src/optimizer/validate_results.py/#L224">source</a></p>
<pre><code class="language-python">.ensure_zero_kcals_have_zero_fat_and_protein(
   interpreted_results
)
</code></pre>
<hr />
<p>Checks that for any month where kcals is zero for any of the foods,
then fat and protein must also be zero.</p>
<p><strong>Args</strong></p>
<ul>
<li><strong>interpreted_results</strong> (InterpretedResults) : An instance of the InterpretedResults class</li>
</ul>
<p><strong>Returns</strong></p>
<p>None</p>
<hr />
<p>Notes:
    This function is called to ensure that the kcals, fat and protein values are consistent
    for each food source, feed and biofuels independently.</p>
<p><strong>Raises</strong></p>
<ul>
<li><strong>AssertionError</strong>  : If the kcals value is zero but the fat or protein value is non-zero.</li>
</ul>
<h3 id="ensure_never_nan">.ensure_never_nan</h3>
<p><a href="https://github.com/allfed/allfed-integrated-model/blob/master/src/optimizer/validate_results.py/#L272">source</a></p>
<pre><code class="language-python">.ensure_never_nan(
   interpreted_results
)
</code></pre>
<hr />
<p>This function checks that the interpreter results are always defined as a real number.
It does this by calling the make_sure_not_nan() method on each of the interpreted_results attributes.
If any of the attributes contain NaN values, an exception will be raised.</p>
<p><strong>Args</strong></p>
<ul>
<li><strong>interpreted_results</strong> (InterpretedResults) : An instance of the InterpretedResults class.</li>
</ul>
<p><strong>Raises</strong></p>
<ul>
<li><strong>ValueError</strong>  : If any of the interpreted_results attributes contain NaN values.</li>
</ul>
<p><strong>Returns</strong></p>
<p>None</p>
<h3 id="ensure_all_greater_than_or_equal_to_zero">.ensure_all_greater_than_or_equal_to_zero</h3>
<p><a href="https://github.com/allfed/allfed-integrated-model/blob/master/src/optimizer/validate_results.py/#L301">source</a></p>
<pre><code class="language-python">.ensure_all_greater_than_or_equal_to_zero(
   interpreted_results
)
</code></pre>
<hr />
<p>Checks that all the results variables are greater than or equal to zero.</p>
<p><strong>Args</strong></p>
<ul>
<li><strong>interpreted_results</strong> (InterpretedResults) : An instance of the InterpretedResults class</li>
</ul>
<p><strong>Raises</strong></p>
<ul>
<li><strong>AssertionError</strong>  : If any of the results variables are less than zero</li>
</ul>
<h3 id="assert_feed_and_biofuel_used_is_zero_if_humans_are_starving">.assert_feed_and_biofuel_used_is_zero_if_humans_are_starving</h3>
<p><a href="https://github.com/allfed/allfed-integrated-model/blob/master/src/optimizer/validate_results.py/#L781">source</a></p>
<pre><code class="language-python">.assert_feed_and_biofuel_used_is_zero_if_humans_are_starving(
   interpreted_results, epsilon = 0.001
)
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../scenarios/run_model_no_trade/" class="btn btn-neutral float-right" title="Run model no trade">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../parameters/" class="btn btn-neutral" title="Parameters"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Me</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../parameters/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../scenarios/run_model_no_trade/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../../..';</script>
    <script src="../../../../js/theme_extra.js" defer></script>
    <script src="../../../../js/theme.js" defer></script>
      <script src="../../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
