<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../../../img/favicon.ico">
  <title>Create nuclear winter csv - ALLFED Integrated Model</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../../../css/theme.css" />
  <link rel="stylesheet" href="../../../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Create nuclear winter csv";
    var mkdocs_page_input_path = "modules/src/import_scripts_no_food_trade/create_nuclear_winter_csv.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../../../.." class="icon icon-home"> ALLFED Integrated Model</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../..">ALLFED Integrated Food System Model</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Modules</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="#">Src</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="#">Food system</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/animal_populations/">Animal populations</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/cellulosic_sugar/">Cellulosic sugar</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/feed_and_biofuels/">Feed and biofuels</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/food/">Food</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/greenhouses/">Greenhouses</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/meat_and_dairy/">Meat and dairy</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/methane_scp/">Methane scp</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/outdoor_crops/">Outdoor crops</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/seafood/">Seafood</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/seaweed/">Seaweed</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/stored_food/">Stored food</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../food_system/unit_conversions/">Unit conversions</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Import scripts no food trade</a>
    <ul class="current">
                <li class="toctree-l3"><a class="reference internal" href="../create_crop_macros_csv/">Create crop macros csv</a>
                </li>
                <li class="toctree-l3 current"><a class="reference internal current" href="./">Create nuclear winter csv</a>
    <ul class="current">
    <li class="toctree-l4"><a class="reference internal" href="#get_crop_ratios_this_country">get_crop_ratios_this_country</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#get_overall_reduction">get_overall_reduction</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#calculate_reductions">calculate_reductions</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#clean_up_nw_csv">clean_up_nw_csv</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#get_all_crops_correct_countries">get_all_crops_correct_countries</a>
    </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Optimizer</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../optimizer/extract_results/">Extract results</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../optimizer/interpret_results/">Interpret results</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../optimizer/optimizer/">Optimizer</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../optimizer/parameters/">Parameters</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../optimizer/validate_results/">Validate results</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Scenarios</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../scenarios/run_model_no_trade/">Run model no trade</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../scenarios/run_scenario/">Run scenario</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../scenarios/run_scenarios_from_yaml/">Run scenarios from yaml</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../scenarios/scenarios/">Scenarios</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Utilities</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../utilities/constants/">Constants</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../utilities/import_utilities/">Import utilities</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../utilities/make_powerpoint/">Make powerpoint</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../utilities/plotter/">Plotter</a>
                </li>
    </ul>
                </li>
    </ul>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../..">ALLFED Integrated Model</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Modules &raquo;</li>
        
      
        
          <li>Src &raquo;</li>
        
      
        
          <li>Import scripts no food trade &raquo;</li>
        
      
    
    <li>Create nuclear winter csv</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="_1"></h1>
<h3 id="get_crop_ratios_this_country">get_crop_ratios_this_country</h3>
<p><a href="https://github.com/allfed/allfed-integrated-model/blob/master/src/import_scripts_no_food_trade/create_nuclear_winter_csv.py/#L22">source</a></p>
<pre><code class="language-python">.get_crop_ratios_this_country(
   country_id, crop_macros
)
</code></pre>
<hr />
<p>This function calculates the kcal ratios production for wheat, rice, soy, and spring wheat for each country.
We assume some similar crops will count towards these ratios, in order to get a better approximation of how the
reduction will affect the country.</p>
<p><strong>Args</strong></p>
<ul>
<li><strong>country_id</strong> (str) : The country ID for which the crop ratios are to be calculated.</li>
<li><strong>crop_macros</strong> (CropMacros) : An instance of the CropMacros class.</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><strong>dict</strong>  : A dictionary containing the crop ratios for the given country.</li>
</ul>
<p><strong>Raises</strong></p>
<ul>
<li><strong>AssertionError</strong>  : If the sum of relevant kcals is not between 0 and kcals_check.</li>
</ul>
<hr />
<h3 id="get_overall_reduction">get_overall_reduction</h3>
<p><a href="https://github.com/allfed/allfed-integrated-model/blob/master/src/import_scripts_no_food_trade/create_nuclear_winter_csv.py/#L92">source</a></p>
<pre><code class="language-python">.get_overall_reduction(
   country_data, country_id, crop_macros
)
</code></pre>
<hr />
<p>This function determines the total reduction in production using the relative reduction
in corn, rice, soy, and spring wheat. It also separately assigns the grass reduction appropriately.</p>
<p><strong>Args</strong></p>
<ul>
<li><strong>country_data</strong> (pandas.DataFrame) : A pandas dataframe containing the data for the country</li>
<li><strong>country_id</strong> (str) : The id of the country</li>
<li><strong>crop_macros</strong> (pandas.DataFrame) : A pandas dataframe containing the crop macros data</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><strong>dict</strong>  : A dictionary containing the average yearly reduction for crop production</li>
</ul>
<hr />
<h3 id="calculate_reductions">calculate_reductions</h3>
<p><a href="https://github.com/allfed/allfed-integrated-model/blob/master/src/import_scripts_no_food_trade/create_nuclear_winter_csv.py/#L143">source</a></p>
<pre><code class="language-python">.calculate_reductions(
   country_data, country_id, crop_macros
)
</code></pre>
<hr />
<p>Calculate the crop reduction percentage for each year and aggregate as array.</p>
<p><strong>Args</strong></p>
<ul>
<li><strong>country_data</strong> (dict) : A dictionary containing data for a specific country.</li>
<li><strong>country_id</strong> (str) : A string representing the ID of the country.</li>
<li><strong>crop_macros</strong> (dict) : A dictionary containing crop macro data.</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><strong>list</strong>  : A list of crop and grass reduction percentages for each year.</li>
</ul>
<hr />
<h3 id="clean_up_nw_csv">clean_up_nw_csv</h3>
<p><a href="https://github.com/allfed/allfed-integrated-model/blob/master/src/import_scripts_no_food_trade/create_nuclear_winter_csv.py/#L185">source</a></p>
<pre><code class="language-python">.clean_up_nw_csv(
   nw_csv, nw_csv_cols
)
</code></pre>
<hr />
<p>This function takes in a nuclear winter csv file and its columns, cleans up the data, and returns a pandas
dataframe.</p>
<p><strong>Args</strong></p>
<ul>
<li><strong>nw_csv</strong> (pandas.DataFrame) : The nuclear winter csv file to be cleaned up.</li>
<li><strong>nw_csv_cols</strong> (list) : The columns of the nuclear winter csv file.</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><strong>DataFrame</strong>  : The cleaned up nuclear winter csv file.</li>
</ul>
<hr />
<h3 id="get_all_crops_correct_countries">get_all_crops_correct_countries</h3>
<p><a href="https://github.com/allfed/allfed-integrated-model/blob/master/src/import_scripts_no_food_trade/create_nuclear_winter_csv.py/#L238">source</a></p>
<pre><code class="language-python">.get_all_crops_correct_countries(
   input_table
)
</code></pre>
<hr />
<p>This function takes in a table of crop data for different countries and returns the columns with all the
reductions for every crop, with the
countries properly aggregated (eu27+uk combined) and Taiwan reductions equal to China's (Rutgers dataset doesn't
include Taiwan as a distinct entity)</p>
<p><strong>Args</strong></p>
<ul>
<li><strong>input_table</strong> (dict) : A dictionary containing crop data for different countries</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><strong>tuple</strong>  : A tuple containing two lists. The first list contains tuples of country IDs and names. The second list
contains the reductions for all crops for each country.</li>
</ul>
<p><strong>Raises</strong></p>
<ul>
<li><strong>ValueError</strong>  : If there is missing data for a country</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../optimizer/extract_results/" class="btn btn-neutral float-right" title="Extract results">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../create_crop_macros_csv/" class="btn btn-neutral" title="Create crop macros csv"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Me</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../create_crop_macros_csv/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../optimizer/extract_results/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../../..';</script>
    <script src="../../../../js/theme_extra.js" defer></script>
    <script src="../../../../js/theme.js" defer></script>
      <script src="../../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
